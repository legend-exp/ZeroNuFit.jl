<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Partitions and events · ZeroNuFit.jl</title><meta name="title" content="Partitions and events · ZeroNuFit.jl"/><meta property="og:title" content="Partitions and events · ZeroNuFit.jl"/><meta property="twitter:title" content="Partitions and events · ZeroNuFit.jl"/><meta name="description" content="Documentation for ZeroNuFit.jl."/><meta property="og:description" content="Documentation for ZeroNuFit.jl."/><meta property="twitter:description" content="Documentation for ZeroNuFit.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ZeroNuFit.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../likelihood/">Likelihood implementation</a></li><li><a class="tocitem" href="../installation/">First steps</a></li><li><a class="tocitem" href="../config/">Configuration file</a></li><li class="is-active"><a class="tocitem" href>Partitions and events</a><ul class="internal"><li><a class="tocitem" href="#Partitions-file"><span>Partitions file</span></a></li><li><a class="tocitem" href="#Events-file"><span>Events file</span></a></li></ul></li><li><a class="tocitem" href="../toys/">Generating toys</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Partitions and events</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Partitions and events</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/legend-exp/ZeroNuFit.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/legend-exp/ZeroNuFit.jl/blob/main/docs/src/inputs.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>The fit takes in inputs two files in JSON format (for a full customization of the fit), which paths have to be specified in the <code>config.json</code> file.</p><p>Table of contents:</p><ul><li class="no-marker"><ul><li><a href="#Partitions-file">Partitions file</a></li><li><a href="#Events-file">Events file</a></li></ul></li></ul><h2 id="Partitions-file"><a class="docs-heading-anchor" href="#Partitions-file">Partitions file</a><a id="Partitions-file-1"></a><a class="docs-heading-anchor-permalink" href="#Partitions-file" title="Permalink"></a></h2><p>The partitions file gives information on the independent spectra to be used in the fit/likelihood, this is set by the &quot;partitions&quot; key in the config file.  This provides all the information neccessary to define the fit model.</p><p>The file consists of a file of independent spectra to include in the fit (for example channels or partitions).  A partition is defined uniquely by a range of time-stamps, a detector name and an experiment name. </p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>In principle the &#39;detector&#39; does not need to be a single detector (e.g. <code>C000RG1</code>) but can be a label for any groups of detectors (e.g. <code>COAX_dets</code>).  This allows to make fits where all detectors are fit together.</p></div></div><p>The partitions are grouped into <code>fit_groups</code>: these are sets of partitions which are treated with the same background/signal fit model and range. In the partitions file, the user must provide the information on the fit groups and partitions (organized by fit group). </p><p>This JSON file has a nested structure with two subdictionaries, the first with key <code>&quot;fit_groups&quot;</code>, describing the groupings in the fit, and the second <code>&quot;partitions&quot;</code> giving a list of partitions for each fit group. An example is shown below.</p><pre><code class="nohighlight hljs">{
&quot;fit_groups&quot;:{
                &quot;group_one&quot;:{
                            &quot;range&quot;:[[1930,2099],[2109,2114],[2124,2190]],
                            &quot;model&quot;:&quot;uniform&quot;,
                            &quot;bkg_name&quot;:&quot;low_bkg&quot;
                            &quot;signal_name&quot;:&quot;gaussian_plus_lowEtail&quot;
                            }

},
&quot;partitions&quot;: {
                &quot;group_one&quot;:[

                            {  
                                &quot;experiment&quot;: &quot;LEGEND&quot;,
                                &quot;detector&quot;: &quot;DET_0&quot;,
                                &quot;start_ts&quot;: 1704950367,
                                &quot;end_ts&quot;: 1708271505,
                                &quot;eff_tot&quot;: 0.6,
                                &quot;eff_tot_sigma&quot;: 0.1,
                                &quot;width&quot;: 3,
                                &quot;width_sigma&quot;: 1,
                                &quot;exposure&quot;: 1,
                                &quot;bias&quot;: 0.2,
                                &quot;bias_sigma&quot;: 0.1
                            }, ...
                            ],
                &quot;group_two&quot;:...
            },


}
            </code></pre><p>They key <code>bkg_name</code> is used to set the name of the background parameter for this group. Note that several groups can be fitted with the same background parameter, this enables quick modification of the fit.</p><p>The key <code>&quot;model&quot;:&quot;uniform&quot;</code> is used to set the background model to uniform as default. For different background model shapes, additional information are necessary and these can be specified in the <code>config.json</code> (see the &quot;Configuration file&quot; documentation).</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The background shape is set to global for all partitions, differently from the signal shape (see below) that can be specified differently for each fit group.</p></div></div><p>Notice it is possible to specify the signal shape for each fit group.  The available options at the moment are <code>&quot;signal_name&quot;:&quot;gaussian_plus_lowEtail&quot;</code> or <code>&quot;signal_name&quot;:&quot;gaussian&quot;</code> (default). If the key is omitted, the default Gaussian signal shape will be adopted. Notice that if you want to use the <code>&quot;signal_name&quot;:&quot;gaussian_plus_lowEtail&quot;</code> option (eg for MAJORANA DEMONSTRATOR data), you need to provide additional input signal shape parameters (<code>frac</code>, <code>sigma</code>, <code>tau</code>). </p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>MAJORANA DEMONSTRATOR (MJD) input data are taken from <a href="https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.130.062501">&quot;I. J. Arnquist et al., Final Result of the Majorana Demonstrator’s Search for Neutrinoless Double- β Decay in Ge 76, PRL 130, 062501 (2023)&quot;</a>.  Here, you can find the input data under the supplemental materials: <code>supp_analysis_parameters.txt</code> and <code>supp_event_list.txt</code>.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Notice that the <code>width</code> parameter assumes different meanings depending on the chosen signal shape:</p><ul><li>if <code>&quot;signal_name&quot;:&quot;gaussian_plus_lowEtail&quot;</code>, <code>width</code> is the fractional uncertainty on the FWHM of the peak at 2039 keV (it rescales the energy resolution of the peak)</li><li>if <code>&quot;signal_name&quot;:&quot;gaussian&quot;</code>, <code>width</code> is the energy resolution expressed in standard deviations (NOT in FWHM)</li></ul></div></div><h2 id="Events-file"><a class="docs-heading-anchor" href="#Events-file">Events file</a><a id="Events-file-1"></a><a class="docs-heading-anchor-permalink" href="#Events-file" title="Permalink"></a></h2><p>In addition, it is neccessary to provide an &#39;event&#39; file describing the events observed in the data, the path to this file is specified by the &#39;events&#39; key in the config. Again this is a JSON file consisting of a list of observed events of the form.</p><pre><code class="nohighlight hljs">    {       &quot;experiment&quot;:&quot;LEGEND&quot;,
            &quot;energy&quot;: 2069.420,
            &quot;timestamp&quot;: 1755109448,
            &quot;detector&quot;: &quot;DET_0&quot;
        },</code></pre><p>The timestamp and detector are used to extract which partition this event corresponds to. To convert to this format from the standard GERDA and LEGEND files, there are tools available in https://github.com/tdixon97/legend-0vbb-config.</p><p>It is possible to supply a list of partition and event files in this case the list of fit groups and events are concatenated.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>If multiple files are provided <code>fit_group</code> must still be unique.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../config/">« Configuration file</a><a class="docs-footer-nextpage" href="../toys/">Generating toys »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Friday 14 February 2025 17:24">Friday 14 February 2025</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
